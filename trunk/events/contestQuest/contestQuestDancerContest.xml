<?xml version="1.0" ?><jasbro.game.world.customContent.WorldEvent><id>contestQuestDancerContest</id><triggers></triggers><effects><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventLoadVariable><source>difficulty</source><target>difficulty</target></jasbro.game.world.customContent.effects.WorldEventLoadVariable><jasbro.game.world.customContent.effects.WorldEventLoadVariable><source>bonusPointsVersion</source><target>bonusPointsVersion</target></jasbro.game.world.customContent.effects.WorldEventLoadVariable><jasbro.game.world.customContent.effects.WorldEventCode><code>//calculate max-prices
int priceMoney = 0;
int skillPoints = 0;
if (difficulty == 1) {
  priceMoney =  10000;
}
else if (difficulty == 2) {
  priceMoney = 100000;
  skillPoints = 1;
}
else {
  priceMoney = 1000000;
  skillPoints = 3;
}</code><displayHeight>2</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventCode><code>int score = 0;
score += character.getFinalValue(BaseAttributeTypes.CHARISMA) * 2;
score += character.getFinalValue(SpecializationAttribute.STRIP);

if (bonusPointsVersion == 1) {
  score += character.getFinalValue(Sextype.FOREPLAY) * 3 / 4;
}
else {
  score += character.getFinalValue(SpecializationAttribute.SEDUCTION) * 3 / 4;
}

int targetScore = difficulty * difficulty * 100;

int place;
if (score &gt; targetScore) {
  place = 1;
}
else {
  skillPoints = 0;
  if (score &gt; targetScore * 19 / 20) {
    place = 2;
    priceMoney = priceMoney / (place * place * difficulty);
  }
  else if (score &gt; targetScore * 18 / 20) {
    place = 3;
    priceMoney = priceMoney  / (place * place * difficulty);
  }
  else if (score &gt; targetScore * 16 / 20) {
    place = 4;
    priceMoney = priceMoney / (place * place * difficulty);
  }
  else if (score &gt; targetScore * 13 / 20) {
    place = 5;
    priceMoney = priceMoney / (place * place * difficulty);
  }
  else {
    place = 6;
    priceMoney = 0;
    if (difficulty &gt;= 3) {
      place += Util.getInt(0, 10);
    }
  }
}

for (int i = 0; i &lt; skillPoints; i++) {
  character.addBonusPerk();
}
character.fame.modifyFame(priceMoney / 20);
data.protagonist.fame.modifyFame(priceMoney / 100);</code><displayHeight>7</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; participates in todays striptease contest. The event takes place in a small, shady looking strip club. A mob of drunken lowlifes is waiting eagerly for the competition to start.</message><images><jasbro.game.world.customContent.ImageSelection><image>danceContest3.jpg</image><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>BARTEND</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; participates in todays striptease contest. The event takes place in one of the better stip clubs of the city. A sizable crowd fills the room, but the front row seats are reserved for a small amount of customers of higher status.</message><images><jasbro.game.world.customContent.ImageSelection><image>danceContest3.jpg</image><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MAID</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; participates in todays striptease competition. The beautifully decorated strip club isn't actually that full, but the clientele is absolutely high class. Many of the richer lords and ladies are present and are waiting to be entertained by the competitors.</message><images><jasbro.game.world.customContent.ImageSelection><image>danceContest3.jpg</image><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MAID</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/cabaret.png</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return difficulty == 2;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return difficulty &lt;= 1;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; showed off &lt;c.hisher&gt; incredible flexibility and performed a very erotic dance. The audience was left drooling in their seats.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>DANCE</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt;'s showed off her striptease skills and the customers were reasonably impressed.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>DANCE</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt;'s striptease wasn't particularly arousing to anybody. Most of the audience was left bored.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>DANCE</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(SpecializationAttribute.STRIP) &gt; targetScore * 2 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(SpecializationAttribute.STRIP) &gt; targetScore * 3 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; erotically played with &lt;c.himselfherself&gt;, while everyonce watched &lt;c.himher&gt; on the edge of their seats. An incredibly hot performance.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MASTURBATION</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; did a reasonable job playing with &lt;c.himselfherself&gt; on stage. There weren't many reasons for complaints.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MASTURBATION</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; was supposed to play with herself on stage, but &lt;c.hisher&gt; display wasn't particularly arousing at all.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MASTURBATION</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(Sextype.FOREPLAY) &gt; targetScore * 2 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(Sextype.FOREPLAY)  &gt; targetScore * 3 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; did an incredible job at seducing various members of the audience. They were left sweating and wanting more as &lt;c.heshe&gt; moved erotically in their lap and whispered dirty things into their ears.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>DANCE</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; tried to seduce various customers, but couldn't quite get it right. &lt;c.heShe&gt; got average marks.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>DANCE</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>The patrons weren't impressed at all by &lt;c.name&gt;'s attempts to seduce them.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>DANCE</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(SpecializationAttribute.SEDUCTION) &gt; targetScore * 2 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(SpecializationAttribute.SEDUCTION) &gt; targetScore * 3 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return bonusPointsVersion == 1;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventCode><code>String message = "Under standing ovations &lt;c.name&gt; gets handed the trophy for first place.";
if (skillPoints &gt; 0) {
  message += TextUtil.getInstance().insertObjects(" &lt;c.heShe&gt; won {0} gold and her overall skill improved (+{1} perks).", new Object[] {priceMoney, skillPoints});
}
else {
  message += TextUtil.getInstance().insertObjects(" &lt;c.heShe&gt; won {0} gold.", new Object[] {priceMoney});
}
message += " In addition to that many people will talk about you and &lt;c.name&gt; for a while.";
message = TextUtil.getInstance().applyTemplates(message, characters);</code><displayHeight>2</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;message&gt;</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/cabaret.png</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventCode><code>String message = null;
if (priceMoney &gt; 0) {
  message = TextUtil.getInstance().insertObjects(" &lt;c.heShe&gt; made {0}. place and won {1} gold.", new Object[] {place, priceMoney});
}
else {
  message = TextUtil.getInstance().insertObjects(" &lt;c.name&gt; only got {0}th place.", new Object[] {place});
}
message = TextUtil.getInstance().applyTemplates(message, characters);</code><displayHeight>2</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;message&gt;</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/stripclub.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return place == 1;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventSetQuestStatus><questStatus>SOLVED</questStatus></jasbro.game.world.customContent.effects.WorldEventSetQuestStatus><jasbro.game.world.customContent.effects.WorldEventCode><code>//Make sure character can't be used during next competitions
cooldown = new CoolDown(45, "contest", "Contest participation", "Participated in a contest and won't be able to do so for a little while.");
character.addCondition(cooldown);

data.earnMoney(priceMoney, "Strip contest");</code><displayHeight>1</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer></effects></jasbro.game.world.customContent.WorldEvent>