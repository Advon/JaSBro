<?xml version="1.0" ?><jasbro.game.world.customContent.WorldEvent><id>dungeonEncounterMonster</id><triggers><jasbro.game.world.customContent.Trigger><requirement class="jasbro.game.world.customContent.requirements.AndRequirement"><requirements><jasbro.game.world.customContent.requirements.ActivityRequirement><activityType>EXPLORE</activityType></jasbro.game.world.customContent.requirements.ActivityRequirement></requirements></requirement><triggerType>ACTIVITYPERFORMED</triggerType></jasbro.game.world.customContent.Trigger></triggers><effects><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventCode><code>ComplexEnemy enemy = CharacterSpawner.spawnEnemy(activity.getEnemySpawnLocation());
Battle battle = new Battle(character, enemy);
do {
    battle.doRound();
} 
while (enemy.getHitpoints() &gt; 10 &amp;&amp; character.getHitpoints() &gt; 10); // don't fight to the death</code><displayHeight>1</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; encountered a &lt;enemy.name&gt; in the dungeon and fought it.
&lt;battle.combatText&gt;</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>FIGHT</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>FIGHT</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>enemy</target></jasbro.game.world.customContent.ImageSelection></images><background><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>true</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventChangeAttribute><attributeType class="jasbro.game.character.specialization.SpecializationAttribute">VETERAN</attributeType><value>0.3</value><target>character</target><addToActivity>false</addToActivity></jasbro.game.world.customContent.effects.WorldEventChangeAttribute><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventCode><code>activity.defeatedEnemies.add(enemy);</code><displayHeight>1</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; defeated the &lt;enemy.name&gt;.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>VICTORIOUS</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>true</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventCode><code>//TODO Character lost</code><displayHeight>1</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getHitpoints() &gt; 10;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer></effects></jasbro.game.world.customContent.WorldEvent>