<?xml version="1.0" ?><jasbro.game.world.customContent.WorldEvent><id>contestQuestMaidContest</id><triggers></triggers><effects><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventLoadVariable><source>difficulty</source><target>difficulty</target></jasbro.game.world.customContent.effects.WorldEventLoadVariable><jasbro.game.world.customContent.effects.WorldEventCode><code>//calculate max-prices
int priceMoney = 0;
int skillPoints = 0;
if (difficulty == 1) {
  priceMoney =  10000;
}
else if (difficulty == 2) {
  priceMoney = 100000;
  skillPoints = 1;
}
else {
  priceMoney = 1000000;
  skillPoints = 3;
}</code><displayHeight>2</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventCode><code>int score = 0;
score += character.getFinalValue(BaseAttributeTypes.CHARISMA) / 2;
score += character.getFinalValue(SpecializationAttribute.COOKING);
score += character.getFinalValue(SpecializationAttribute.CLEANING);

int targetScore = difficulty * difficulty * 100;

int place;
if (score &gt; targetScore) {
  place = 1;
}
else {
  skillPoints = 0;
  if (score &gt; targetScore * 19 / 20) {
    place = 2;
    priceMoney = priceMoney / (place * place * difficulty);
  }
  else if (score &gt; targetScore * 18 / 20) {
    place = 3;
    priceMoney = priceMoney  / (place * place * difficulty);
  }
  else if (score &gt; targetScore * 16 / 20) {
    place = 4;
    priceMoney = priceMoney / (place * place * difficulty);
  }
  else if (score &gt; targetScore * 13 / 20) {
    place = 5;
    priceMoney = priceMoney / (place * place * difficulty);
  }
  else {
    place = 6;
    priceMoney = 0;
    if (difficulty &gt;= 3) {
      place += Util.getInt(0, 10);
    }
  }
}

for (int i = 0; i &lt; skillPoints; i++) {
  character.addBonusPerk();
}
character.fame.modifyFame(priceMoney / 20);
data.protagonist.fame.modifyFame(priceMoney / 100);</code><displayHeight>6</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; participates in todays maid contest. The event takes place in the outskirts of the city and only a few tents and a tiny crowd are there to indicate that anything is going on at all.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MAID</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>maidContest.jpg</image><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; participates in todays maid contest. The event takes place on a small square within the city and a sizable crowd has gathered to watch the proceedings. </message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MAID</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>maidContest.jpg</image><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; participates in todays maid championship. The main market place erupts in cheers when &lt;c.name&gt; walks through the crowd together with the other competitors. There is a lengthy ceremony and the noble who funded the competition holds a short speech before it the actual contest starts.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MAID</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>maidContest.jpg</image><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return difficulty == 2;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return difficulty &lt;= 1;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; did an excellent job during the cooking part of the event. She got high praises across the board.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>COOK</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/kitchen.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt;'s cooking skills were highly debated. Some judges gave &lt;c.himher&gt; very high marks, others very low ones. Overall an average result.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>COOK</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/kitchen.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt;'s cooking did leave much to be desired.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>COOK</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/kitchen.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(SpecializationAttribute.COOKING) &gt; targetScore * 2 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(SpecializationAttribute.COOKING) &gt; targetScore * 3 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.heShe&gt; had the whole test area cleaned perfectly in no time at all. An incredible performance.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>CLEAN</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/bigbedroom.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; cleaned the testing area perfectly. But &lt;c.heshe&gt; got some point deductions due to the time it took.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>CLEAN</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/bigbedroom.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>It took &lt;c.name&gt; a lot of time to clean the testing area and the judges still found specks of dirt in several places. A terrible performance unfortunately.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>CLEAN</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/bigbedroom.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(SpecializationAttribute.CLEANING) &gt; targetScore * 2 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(SpecializationAttribute.CLEANING) &gt; targetScore * 3 / 5;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;c.name&gt; got a lot of bonus points from the judges for just how sexy &lt;c.heshe&gt; looked during the tasks.</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MAID</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>backgrounds/sky.jpg</image><imageLocation>GLOBAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>false</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return character.getFinalValue(BaseAttributeTypes.CHARISMA) &gt; difficulty * 20;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventCondition><subEffects><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventCode><code>String message = "Under standing ovations &lt;c.name&gt; gets handed the trophy for first place.";
if (skillPoints &gt; 0) {
  message += TextUtil.getInstance().insertObjects(" &lt;c.heShe&gt; won {0} gold and her overall skill improved (+{1} perks).", new Object[] {priceMoney, skillPoints});
}
else {
  message += TextUtil.getInstance().insertObjects(" &lt;c.heShe&gt; won {0} gold.", new Object[] {priceMoney});
}
message += " In addition to that many people will talk about you and &lt;c.name&gt; for a while.";
message = TextUtil.getInstance().applyTemplates(message, characters);</code><displayHeight>2</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;message&gt;</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MAID</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>maid_wallpaper_by_jessicachristi-d4ln531.jpg</image><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer><jasbro.game.world.customContent.effects.WorldEventEffectContainer><subEffects><jasbro.game.world.customContent.effects.WorldEventCode><code>String message = null;
if (priceMoney &gt; 0) {
  message = TextUtil.getInstance().insertObjects(" &lt;c.heShe&gt; made {0}. place and won {1} gold.", new Object[] {place, priceMoney});
}
else {
  message = TextUtil.getInstance().insertObjects(" &lt;c.name&gt; only got {0}th place.", new Object[] {place});
}
message = TextUtil.getInstance().applyTemplates(message, characters);</code><displayHeight>2</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode><jasbro.game.world.customContent.effects.WorldEventSimpleMessage><message>&lt;message&gt;</message><images><jasbro.game.world.customContent.ImageSelection><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>MAID</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></jasbro.game.world.customContent.ImageSelection></images><background><image>maid_wallpaper_by_jessicachristi-d4ln531.jpg</image><imageLocation>LOCAL</imageLocation><imageTags><jasbro.gui.pictures.ImageTag>STANDARD</jasbro.gui.pictures.ImageTag></imageTags><background>false</background><target>character</target></background><importantMessage>true</importantMessage></jasbro.game.world.customContent.effects.WorldEventSimpleMessage></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer></subEffects><requirement class="jasbro.game.world.customContent.requirements.CodeRequirement"><code>return place == 1;</code></requirement></jasbro.game.world.customContent.effects.WorldEventCondition><jasbro.game.world.customContent.effects.WorldEventSetQuestStatus><questStatus>SOLVED</questStatus></jasbro.game.world.customContent.effects.WorldEventSetQuestStatus><jasbro.game.world.customContent.effects.WorldEventCode><code>//Make sure character can't be used during next competitions
cooldown = new CoolDown(45, "contest", "Contest participation", "Participated in a contest and won't be able to do so for a little while.");
character.addCondition(cooldown);

data.earnMoney(priceMoney, "Maid contest");</code><displayHeight>1</displayHeight></jasbro.game.world.customContent.effects.WorldEventCode></subEffects></jasbro.game.world.customContent.effects.WorldEventEffectContainer></effects></jasbro.game.world.customContent.WorldEvent>